import { html, css } from 'lit';
import { customElement, state } from 'lit/decorators.js';
import { BaseElement } from '../../../app/ui/base/base-element';
import type { UserDod } from '../../../app/app-domain/dod';

@customElement('users-list')
export class UsersWidget extends BaseElement {
  static routingAttrs = {
    pattern: '/users',
    tag: 'users-list',
  };

  static styles = css`
    :host {
      display: block;
      padding: 16px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 16px;
    }

    @media (max-width: 600px) {
      .grid {
        grid-template-columns: 1fr;
      }
    }
  `;

  @state()
  private users: UserDod[] = [];

  async connectedCallback() {
    super.connectedCallback();
    this.users = await this.loadUsers();
  }

  private async loadUsers(): Promise<UserDod[]> {
    const nurJSON = `{
  "id": "773084180",
  "name": "Nurbolat",
  "roles": ["HOBBYIST", "MASTER", "MENTOR"],
  "profile": {
    "skills": {
      "Ð¢Ð¾Ð¿Ð¾Ð³Ñ€Ð°Ñ„": "ÐŸÑ€Ð¾Ñ„ÐµÑÑÐ¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð°Ñ ÑÐ¿ÐµÑ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ. ÐžÐ¿Ñ‹Ñ‚ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ 3 Ð³Ð¾Ð´Ð° Ð² Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð½Ð¾Ð¼ Ð¸Ð½ÑÑ‚Ð¸Ñ‚ÑƒÑ‚Ðµ. Ð”Ð°Ð»ÑŒÑˆÐµ Ð¾Ð¿Ñ‹Ñ‚ Ñ€Ð°Ð·Ð²Ð¸Ñ‚Ð¸Ñ ÑÐ²Ð¾ÐµÐ³Ð¾ Ð¿Ñ€Ð¾Ñ„Ð¸Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð±Ð¸Ð·Ð½ÐµÑÐ°.",
      "GIS ÑÐ¿ÐµÑ†Ð¸Ð»Ð°Ð¸ÑÑ‚": "ÐŸÑ€Ð¾Ñ„ÐµÑÑÐ¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð°Ñ ÑÐ¿ÐµÑ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð¿Ð°Ñ€Ð°Ð»Ð»ÐµÐ»ÑŒÐ½Ð°Ñ Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ ÑÐ¿ÐµÑ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ñ‚Ð¾Ð¿Ð¾Ð³Ñ€Ð°Ñ„Ð°. ÐŸÑ€ÐµÐ´ÑÑ‚Ð°Ð²Ð»ÑÐµÑ‚ ÑÐ¾Ð±Ð¾Ð¹ ÑÐ¼ÐµÑˆÐµÐ½Ð¸Ðµ ÐºÐ°Ñ€Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð° Ð¸ it ÑÐ¿ÐµÑ†Ð¸Ð°Ð»Ð¸ÑÑ‚Ð°. Ð•ÑÑ‚ÑŒ Ð¾Ð¿Ñ‹Ñ‚ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸ gis Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Ð¼Ð°Ð³Ð¸ÑÑ‚Ñ€Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð³Ð°Ð·Ð¾Ð¿Ñ€Ð¾Ð²Ð¾Ð´Ð° ÐÐž Ð˜Ð½Ñ‚ÐµÑ€Ð³Ð°Ð· Ð¦ÐµÐ½Ñ‚Ñ€Ð°Ð»ÑŒÐ½Ð°Ñ ÐÐ·Ð¸Ñ.",
      "Ð‘Ð¸Ð·Ð½ÐµÑÐ¼ÐµÐ½": "ÐžÐ¿Ñ‹Ñ‚ Ñ€Ð°Ð·Ð²Ð¸Ñ‚Ð¸Ñ Ð±Ð¸Ð·Ð½ÐµÑÐ° Ð¿Ð¾ Ð¸Ð½Ð¶ÐµÐ½ÐµÑ€Ð½Ñ‹Ð¼ Ð¸Ð·Ñ‹ÑÐºÐ°Ð½Ð¸ÑÐ¼Ð¸ Ð´Ð»Ñ ÐºÐ°Ð¿Ð¸Ñ‚Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÐµÐ»ÑŒÑÑ‚Ð²Ð° (2005-2018 Ð³Ð¾Ð´Ð°). ÐŸÐ¾ÑÐ»Ðµ 2018 Ð³Ð¾Ð´Ð° Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´ Ð² ÑÑ„ÐµÑ€Ñƒ IT Ð¸ Ñ‡ÐµÑ‚Ñ‹Ñ€Ðµ Ð½ÐµÑƒÐ´Ð°Ñ‡Ð½Ñ‹Ñ… ÑÑ‚Ð°Ñ€Ñ‚Ð°Ð¿Ð° Ð² ÑÑ„ÐµÑ€Ðµ Ñ†Ð¸Ñ„Ñ€Ð¾Ð²Ð¸Ð·Ð°Ñ†Ð¸Ð¸ ÑÑ‚Ñ€Ð°Ð½Ñ‹. Ð¡ÐµÐ¹Ñ‡Ð°Ñ Ð±Ð¾Ð»ÑŒÑˆÐµ ÑÐ°Ð¼Ð¾Ð¸Ð´ÐµÐ½Ñ‚Ð¸Ñ„Ð¸Ñ†Ð¸Ñ€ÑƒÑŽ ÑÐµÐ±Ñ ÐºÐ°Ðº ÑÑ‚Ð°Ñ€Ñ‚Ð°Ð¿ÐµÑ€.",
      "ÐŸÑ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð¸ÑÑ‚": "Ð¡Ð°Ð¼Ð¾ÑƒÑ‡ÐºÐ°. 22 Ð³Ð¾Ð´Ð° Ð¾Ð¿Ñ‹Ñ‚Ð° ÐºÐ°Ðº Ñ…Ð¾Ð±Ð±Ð¸ÑÑ‚. 8 Ð»ÐµÑ‚ Ð¾Ð¿Ñ‹Ñ‚Ð° ÐºÐ°Ðº Ð¿Ñ€Ð¾Ñ„ÐµÑÑÐ¸Ð¾Ð½Ð°Ð». Ð˜Ð¼ÐµÑŽ Ð¾Ð¿Ñ‹Ñ‚ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ñ… Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€. Ð‘Ð¾Ð»ÑŒÑˆÐµ ÑÐ¿ÐµÑ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€ÑƒÑŽÑÑŒ Ð² Ð±ÑÐºÐµÐ½Ð´Ðµ. ÐŸÑ€ÐµÐ¿Ð¾Ð´Ð°Ð²Ð°Ð». ÐšÐ°Ðº Ð¼Ð¸Ð½Ð¸Ð¼ÑƒÐ¼ Ð¿ÑÑ‚ÑŒ ÑƒÑ‡ÐµÐ½Ð¸ÐºÐ¾Ð² ÑƒÑÑ‚Ñ€Ð¾Ð¸Ð»Ð¸ÑÑŒ Ð½Ð° Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ, Ð² Ñ‚Ð¾Ð¼ Ñ‡Ð¸ÑÐ»Ðµ Ð´Ð²Ð¾Ðµ Ð² Ð°Ð¼ÐµÑ€Ð¸ÐºÐ°Ð½ÑÐºÐ¸Ð¹ ÑÑ‚Ð°Ñ€Ñ‚Ð°Ð¿.",
      "Ð¡Ñ‚Ð¾Ð»ÑÑ€": "Ð›ÑŽÐ±Ð¸Ñ‚ÐµÐ»ÑŒ, Ð½Ð¾ Ð½Ð° Ð´Ð°Ð½Ð½Ð¾Ð¼ ÑÑ‚Ð°Ð¿Ðµ (2025 Ð³Ð¾Ð´) Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¾ Ñ€Ð°Ð·Ð²Ð¸Ð²Ð°ÑŽ ÑÑ‚Ð¾Ñ‚ Ð½Ð°Ð²Ñ‹Ðº Ð² ÑÐ²ÑÐ·Ð¸ Ñ Ñ€Ð°Ð·Ð²Ð¸Ñ‚Ð¸ÐµÐ¼ Ð½Ð¾Ð²Ð¾Ð³Ð¾ ÑÑ‚Ð°Ñ€Ñ‚Ð°Ð¿Ð°: ÐºÐ¾Ð²Ð¾Ñ€ÐºÐ¸Ð½Ð³-Ð¼Ð°ÑÑ‚ÐµÑ€ÑÐºÐ°Ñ Ð”ÐµÐ´Ð¾Ðº.",
      "3d Ð¼Ð¾Ð´ÐµÐ»Ð¸ÑÑ‚": "Ð£Ð¼ÐµÑŽ Ð½Ð° Ð¿Ð¾Ð»ÑƒÐ»ÑŽÐ±Ð¸Ñ‚ÐµÐ»ÑŒÑÐºÐ¾Ð¼, Ð¿Ð¾Ð»ÑƒÐ¿Ñ€Ð¾Ñ„ÐµÑÑÐ¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾Ð¼ ÑƒÑ€Ð¾Ð²Ð½Ðµ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°Ñ‚ÑŒ 3d Ð¼Ð¾Ð´ÐµÐ»Ð¸. Ð¢Ð¾Ð»ÑŒÐºÐ¾ Ñ‚Ð²ÐµÑ€Ð´Ð¾Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ðµ Ð¼Ð¾Ð´ÐµÐ»Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ. ÐÐ°Ñ‡Ð¸Ð½Ð°Ð» Ñ fusion360, Ð¿Ñ€Ð¾Ð´Ð¾Ð»Ð¶Ð¸Ð» Ð½Ð° OnShape, ÑÐµÐ¹Ñ‡Ð°Ñ Ð¾ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ð»ÑÑ Ð½Ð° FreeCad Ñ‚Ð°Ðº ÐºÐ°Ðº Ð¾Ð½Ð¾ Ð±ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ð¾Ðµ Ð¸ ÐµÑÑ‚ÑŒ CAM Ð¼Ð¾Ð´ÑƒÐ»ÑŒ.",
      "ÐžÐ¿ÐµÑ€Ð°Ñ‚Ð¾Ñ€ Ð§ÐŸÐ£": "ÐžÐ¿Ñ‹Ñ‚ Ð½Ðµ ÑÐºÐ°Ð·Ð°Ñ‚ÑŒ Ñ‡Ñ‚Ð¾ Ð±Ð¾Ð»ÑŒÑˆÐ¾Ð¹, Ð½Ð¾ Ð²ÑÐµ Ñ‚Ð°ÐºÐ¸ ÐµÑÑ‚ÑŒ Ð¾Ð¿Ñ‹Ñ‚ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ g-ÐºÐ¾Ð´Ðµ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼ ÐºÐ°Ðº Ð´Ð»Ñ Ñ‚Ñ€ÐµÑ…Ð¾ÑÐµÐ²Ð¾Ð³Ð¾, Ñ‚Ð°Ðº Ð¸ Ñ‡ÐµÑ‚Ñ‹Ñ€ÐµÑ…Ð¾ÑÐµÐ²Ð¾Ð³Ð¾ (Ñ Ð¿Ð¾Ð²Ð¾Ñ€Ð¾Ñ‚Ð½Ñ‹Ð¼ Ð¼ÐµÑ…Ð°Ð½Ð·Ð¼Ð¸Ð¾Ð¼, Ð°Ð»Ñ Ñ‚Ð¾ÐºÐ°Ñ€Ð½Ñ‹Ð¹ ÑÑ‚Ð°Ð½Ð¾Ðº). ÐŸÑ€Ð°Ð²Ð´Ð° ÑÑ‚Ð°Ð½Ð¾Ðº Ð½ÐµÐ±Ð¾Ð»ÑŒÑˆÐ¾Ð¹ Ð»ÑŽÐ±Ð¸Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ð¹ ÑÐ¾ ÑÑ‚Ð¾Ð»Ð¾Ð¼ 60x40 ÑÐ¼. ÐÐ° Ð´Ð°Ð½Ð½Ñ‹Ð¹ Ð¼Ð¾Ð¼ÐµÐ½Ñ‚ Ð¾ÑÐ²Ð°Ð¸Ð²Ð°ÑŽ Ð±ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ð¾Ðµ ÐŸÐž linuxCNC.",
      "Ð­Ð»ÐµÐºÑ‚Ñ€Ð¾Ñ‚ÐµÑ…Ð½Ð¸Ðº": "ÐÑ€Ð°Ð²Ð¸Ñ‚ÑÑ Ð¸ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°Ñ‚ÑŒ ÑÐ»ÐµÐºÑ‚Ñ€Ð¾Ð½Ð¸ÐºÑƒ. ÐÐ¾ Ð¾Ð¿Ñ‹Ñ‚ Ð¿Ð¾Ð¶Ð°Ð»ÑƒÐ¹ Ð½Ð° ÑÐ°Ð¼Ð¾Ð¼ Ð»ÑŽÐ±Ð¸Ñ‚ÐµÐ»ÑŒÑÐºÐ¾Ð¼ ÑƒÑ€Ð¾Ð²Ð½Ðµ, Ð² ÑÐ²ÑÐ·Ð¸ ÑÐ¾ ÑÐ»Ð¾Ð¶Ð½Ð¾Ð¹ Ð´Ð¸ÑÑ†Ð¸Ð¿Ð»Ð¸Ð½Ð¾Ð¹. ÐÐ¾ Ð²ÑÐµ Ð¶Ðµ ÑƒÑÑ‚Ñ€Ð¾Ð¹ÑÑ‚Ð²Ð° Ñ‡ÑƒÑ‚ÑŒ ÑÐ»Ð¾Ð¶Ð½ÐµÐµ Ð¿Ñ€Ð¾ÑÑ‚Ñ‹Ñ… Ð¼Ð½Ðµ Ð´ÑƒÐ¼Ð°ÑŽ Ð¿Ð¾ ÑÐ¸Ð»Ð°Ð¼ ÑÐ¿Ñ€Ð¾ÐµÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¸ ÑÐ´ÐµÐ»Ð°Ñ‚ÑŒ.",
      "Ð Ð¾Ð±Ð¾Ñ‚Ð¾Ñ‚ÐµÑ…Ð½Ð¸ÐºÐ°": "Ð˜Ð¼ÐµÑŽ Ð¾Ð¿Ñ‹Ñ‚ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼ Ð´Ð»Ñ Ð¼Ð¸ÐºÑ€Ð¾ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ð»ÐµÑ€Ð¾Ð². ÐžÐ¿Ñ‹Ñ‚ Ð½Ðµ Ð±Ð¾Ð»ÑŒÑˆÐ¾Ð¹, Ð½Ð¾ Ñ…Ð¾Ñ€Ð¾ÑˆÐµÐ¹ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ¾Ð¹ ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ð¿Ñ€Ð¾Ñ„Ð¸Ð»ÑŒÐ½Ð°Ñ ÑÐ¿ÐµÑ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð¸ÑÑ‚Ð° web Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¸. Ð¡Ð°Ð¼Ñ‹Ð¹ ÐºÑ€ÑƒÑ‚Ð¾Ð¹ Ð¼Ð¾Ð¹ Ð¿Ñ€Ð¾ÐµÐºÑ‚ (Ð¸ Ð¿Ð¾Ð¶Ð°Ð»ÑƒÐ¹ ÐµÐ´Ð¸Ð½ÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ð¹ Ð´Ð¾Ð²ÐµÐ´ÐµÐ½Ð½Ñ‹Ð¹ Ð´Ð¾ ÐºÐ¾Ð½Ñ†Ð° Ð²Ð¼ÐµÑÑ‚Ðµ Ñ ÑÐ»ÐµÐºÑ‚Ñ€Ð¾Ñ‚ÐµÑ…Ð½Ð¸ÐºÐ¾Ð¹): Ñ€ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð¿Ñ€Ð¾Ð²Ð¾Ð´Ð½Ð¾Ð¹ Ð´Ð²ÑƒÑ…ÐºÐ¾Ð»ÐµÑÐ½Ð¾Ð¹ Ð¼Ð°ÑˆÐ¸Ð½ÐºÐ¸ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÑŽÑ‰ÐµÐ¹ Ð½Ð° Ð¨Ð˜Ðœ ÑÐ¸Ð³Ð½Ð°Ð»Ð°Ñ… Ñ€ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½Ð½Ð¾Ð³Ð¾ Ð½Ð° ÐœÐš AVR ATmegaXXX Ð½Ð° ÑÐ·Ñ‹ÐºÐµ Assembler."
    },
    "avatarUrl": "https://t.me/i/userpic/320/bOrpGbX5Jq3fbysH_VoGshRjzc7AAw_J6UARzLI-qUQ.svg"
  },
  "joinedAt": 1735862400000
}`
    const nur = JSON.parse(nurJSON);
    // ðŸ”§ Ð—Ð°Ð³Ð»ÑƒÑˆÐºÐ°, Ð·Ð°Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ñ€ÐµÐ°Ð»ÑŒÐ½Ñ‹Ð¼ Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ¾Ð¼ Ð´Ð°Ð½Ð½Ñ‹Ñ…
    return Array.from({ length: 6 }, (_, i) => ({
      ...nur,
      id: String(Number(nur.id) + 1)
    }));
  }


  render() {
    return html`
      <div class="grid">
        ${this.users.map(
          (user) => html`
            <user-card
              .user=${user}
              @click=${(e: MouseEvent) => this.handleSelectCard(e, user.id)}
            ></user-card>
          `
        )}
      </div>
    `;
  }

  private handleSelectCard(e: MouseEvent, id: string): void {
    e.preventDefault();
    this.app.router.navigate(`/users/${id}`);
  }
}
